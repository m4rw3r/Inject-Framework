HTTP Request Routing

<p>
	Routing of the HTTP request in the Inject Framework is by default handled by the
	Inject_Request_HTTP class
	(This can be modified by either the bootstrap file or the class_paths configuration option).
	This class determines which controller to load and the action to call,
	it also extracts parameters from the URI.
</p>

<p>
	The default routing is like this:
</p>

<p>
	<tt>example.com/index.php/<dfn>controller</dfn>/<var>action</var></tt>
</p>

<p>
	The following URI segments are saved in the Router and can be retrieved
	by calling the <dfn>get_segments()</dfn> method.
	(Usually you will use <dfn>get_parameter()</dfn> instead)
</p>

<p>
	But the Inject_Request_HTTP also does a few things more:
</p>

<ul>
	<li>It extracts the URI from the request</li>
	<li>It applies routes the URI depending on routing rules defined by the configuration</li>
	<li>It parses the rest of the URI segments into an associative parameter list</li>
</ul>

<h3>Custom routes</h3>

<p>
	Custom routes are defined by the configuration value <var>request_http.routes</var>.
	They can either be key =&gt; value pairs&mdash;with the key to match&mdash;or
	a callable which will receive the URI for processing.
</p>

<h4>Key =&gt; Value, Literal Match</h4>

<p>
	The key can be a literal match, which means that if the key matches the
	URI, then the "old" URI will be replaced by the value.
</p>

<p>
	Example:
</p>

<p>
	The route <tt>'foo/bar' =&gt; 'bar/foo'</tt> will replace the URI <tt>foo/bar</tt> with <tt>bar/foo</tt>.
</p>

<warning>
	The literal matches are just that, literal.
	If an additional segment is added, they won't match.
</warning>

<h4>Key =&gt; Value, Regular Expression</h4>

<p>
	If the uri matches the regular expression, a <dfn>preg_replace()</dfn> will be made
	with the key as the match and the value as the replace.
</p>

<p>
	Example:
</p>

<p>
	The route <tt>'admin/(.+?)(/.*)?' =&gt; 'admin_$1$2'</tt> will route
	all URIs which start with <tt>admin/</tt> to a controller in the <dir>controller/admin</dir>
	directory.
</p>

<h4>Callable</h4>

<p>
	If the literal matches or the regular expressions aren't enough,
	you can use callables (ie. hook your own mehthods) for routing.
</p>

<p>
	To define a callable you give its name as the value,
	and skip the array key, leaving it numeric.<br />
	The called function/method receives the URI as the first parameter
	and the Inject_Request_HTTP object as the second parameter.
</p>



